tags: #algorithm #reverse-polish-notation #japanese 

<hr />

[[200921 Reverse Polish Notation | ðŸ‡ºðŸ‡² English]]
[[200921 ì¤‘ìœ„í‘œê¸°ì‹ í›„ìœ„í‘œê¸°ì‹ìœ¼ë¡œ ë³€í™˜í•˜ê¸° | ðŸ‡°ðŸ‡· í•œêµ­ì–´]]

### é€†ãƒãƒ¼ãƒ©ãƒ³ãƒ‰è¨˜æ³•ï¼ˆreverse polish notationï¼‰

`A*(B+C)`ãªã©ã®æ•°å¼ã‚’**ä¸­ç½®è¨˜æ³•**ï¼ˆinfix notationï¼‰ã¨ã‚ˆã³ã¾ã™ã€‚ã“ã®æ•°å¼ã‚’`ABC+*`ã¿ãŸã„ã«è¡¨ç¾ã™ã‚‹ã®ãŒã§ãã¾ã™ã€‚

ã“ã®è¨˜æ³•ã‚’**å¾Œç½®è¨˜æ³•**ï¼ˆpostfix notationï¼‰ã¾ãŸã¯**é€†ãƒãƒ¼ãƒ©ãƒ³ãƒ‰è¨˜æ³•**ã¨ã‚ˆã³ã¾ã™ã€‚

ä¸­ç½®è¨˜æ³•ã‹ã‚‰RPNã«å¤‰æ›ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯**ã‚¹ã‚¿ãƒƒã‚¯**ã‚’ä½¿ã†ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ã—ã¦æœ‰åãªã®ã§ã€ã‚¹ã‚¿ãƒƒã‚¯ã‚’å­¦ã¶æ™‚çµ¶å¯¾ã«ã¶ã¤ã‹ã‚‹å•é¡Œã®ä¸€ã¤ã§ã™ã€‚

ã§ã¯æ—©é€Ÿã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å‹•ä½œæ–¹å¼ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ä¸€èˆ¬çš„ãªæ‰‹é †ã¯ä¸‹è¨˜ã®é€šã‚Šã§ã™ã€‚

1.  è¢«æ¼”ç®—å­ã®å ´åˆã€ã™ãå‡ºåŠ›ã™ã‚‹ã€‚
    
    ```ruby
    if (expr[i]>='A' and expr[i]<='Z') 
        print expr[i]
    end
    ```
    
2.  `(`ã®å ´åˆã€ã‚¹ã‚¿ãƒƒã‚¯ã«pushã™ã‚‹ã€‚
    
    ```ruby
    if (expr[i]=='(')
        op << expr[i]
    end
    ```
    
3.  `)`ã®å ´åˆã€`(`ãŒã§ã‚‹ã¾ã§ã‚¹ã‚¿ãƒƒã‚¯ã‚’popã™ã‚‹ã€‚
    
    ```ruby
    if (expr[i]==')')
        while op.last != '('
            print op.last 
            op.pop
        end
        op.pop
    end
    ```
    
4.  æ¼”ç®—å­ã®å ´åˆã€ä¸‹è¨˜ã®æ¡ä»¶ãŒtrueã ã£ãŸã‚‰ã‚¹ã‚¿ãƒƒã‚¯ã«pushã™ã‚‹ã€‚
    
    1.  ã‚¹ã‚¿ãƒƒã‚¯ãŒç©ºã„ã¦ã‚‹å ´åˆ
    2.  ã‚¹ã‚¿ãƒƒã‚¯ã®topãŒ`(`ã®å ´åˆ
    3.  ä»Šã®æ¼”ç®—å­ã®å„ªå…ˆé †ä½ãŒã‚¹ã‚¿ãƒƒã‚¯ã®topã®å„ªå…ˆå­ã‚ˆã‚Šæ¹¯ç…Žé †ä½ãŒé«˜ã„å ´åˆ
5.  ï¼”ç•ªã®æ¡ä»¶ãŒfalseã®å ´åˆã€ä»Šã®æ¼”ç®—å­ã®å„ªå…ˆé †ä½ãŒã‚¹ã‚¿ãƒƒã‚¯ã®topã®æ¼”ç®—å­ã®å„ªå…ˆå¼ã‚ˆã‚Šå°ã•ã„ã‹åŒã˜ã«ãªã‚‹ã¾ã§ã‚¹ã‚¿ãƒƒã‚¯ã‚’popã™ã‚‹ã€‚popã™ã‚‹ã®ãŒçµ‚ã‚ã£ãŸã‚‰ä»Šã®æ¼”ç®—å­ã‚’pushã™ã‚‹ã€‚
    
    ```ruby
    if (expr[i]=='+' or expr[i]=='-' or expr[i]=='*' or expr[i]=='/')
        ## 4ë²ˆ
        if (op.size==0 || op.last=='(' || 
           (priority(expr[i]) > priority(op.last)))
         op << expr[i] 
         ## 5ë²ˆ
        else 
            while priority(expr[i]) <= priority(op.last)
                print op.last 
                op.pop 
            end
            op << expr[i]
        end
    end
    
    ```
    
6.  æœ€å¾Œã«ã€ã‚¹ã‚¿ãƒƒã‚¯ã«æ®‹ã£ã¦ã„ã‚‹æ¼”ç®—å­ã‚’å…¨éƒ¨å‡ºåŠ›ã™ã‚‹ã€‚
    
    ```ruby
    op.size.times do
        print op.pop
    end
    ```
    

ä¾‹ãˆã°`A*(B+C)`å¼ãŒä¸Žãˆã‚‰ã‚ŒãŸã¨ã—ã¦ã¿ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

![step1](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/dd5d96fa-fa5b-4ad7-8161-7a2a5003ecd3/infix2postfix-1.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20210206%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20210206T052833Z&X-Amz-Expires=86400&X-Amz-Signature=ce004ed6242373248250f491e350c13e7324fc04ff9172170e956ba8e2dbfb7a&X-Amz-SignedHeaders=host)

`A`ã¯è¢«æ¼”ç®—å­ãªã®ã§**ãƒ«ãƒ¼ãƒ«#1**ã«ã‚ˆã£ã¦å‡ºåŠ›ã—ã¾ã™ã€‚

![step2](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/7aa08ca9-13e6-463c-82c3-20bb593f1f0a/infix2postfix-2.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20210206%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20210206T052833Z&X-Amz-Expires=86400&X-Amz-Signature=e59ba966703166d194edef5094fa74dd6b04863043f4da8fc1223e0f644ceb6c&X-Amz-SignedHeaders=host)

`*`ã¯**ãƒ«ãƒ¼ãƒ«#4**ï¼ˆ`ã‚¹ã‚¿ãƒƒã‚¯ãŒç©ºã„ã¦ã‚‹å ´åˆ`ï¼‰ã«ã‚ˆã£ã¦ã€`(`ã¯**ãƒ«ãƒ¼ãƒ«#2**ã«ã‚ˆã£ã¦ã‚¹ã‚¿ãƒƒã‚¯ã«pushã—ã¾ã™ã€‚

![step3](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/4ecf09a9-aea3-41d6-8296-e1b4324a49ca/infix2postfix-3.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20210206%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20210206T052833Z&X-Amz-Expires=86400&X-Amz-Signature=e3b5750417fe7e0cf5d191e0664f6bc196fae2c02eb8d3cf952795b24c8e4568&X-Amz-SignedHeaders=host)

`B`ã¯è¢«æ¼”ç®—å­ãªã®ã§**ãƒ«ãƒ¼ãƒ«#1**ã«ã‚ˆã£ã¦å‡ºåŠ›ã—ã¾ã™ã€‚`+`ã¯ãƒ«ãƒ¼ãƒ«#4ã®ä¸­ã§ `ã‚¹ã‚¿ãƒƒã‚¯ã®topãŒ ( ã®å ´åˆ`ã«è©²å½“ã™ã‚‹ã®ã§ã‚¹ã‚¿ãƒƒã‚¯ã«pushã—ã¾ã™ã€‚

![step4](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/e141f449-dcd4-4d34-bc05-27a351c91adc/infix2postfix-4.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20210206%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20210206T052833Z&X-Amz-Expires=86400&X-Amz-Signature=643b6a0a57284d454da757a8788412bcd09bc5d62872e5a8d44ae6977a4ae31c&X-Amz-SignedHeaders=host)

`C`ã‚‚è¢«æ¼”ç®—å­ãªã®ã§**ãƒ«ãƒ¼ãƒ«#1**ã«ã‚ˆã£ã¦å‡ºåŠ›ã—ã¾ã™ã€‚

![step5](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/25dd0591-a2a7-4e09-af80-4f6b72bb40dc/infix2postfix-5.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20210206%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20210206T052833Z&X-Amz-Expires=86400&X-Amz-Signature=ebe5b8a0e32e9873073ef092a8ba37d9cdaf1f70f4738e7ec00d575be613466d&X-Amz-SignedHeaders=host)

`)`ã¯**ãƒ«ãƒ¼ãƒ«#3**ã«ã‚ˆã£ã¦`(`ãŒã§ã‚‹ã¾ã§ã‚¹ã‚¿ãƒƒã‚¯ã‚’popã—ã¾ã™ã€‚æœ€å¾Œã«ã‚¹ã‚¿ãƒƒã‚¯ã«æ®‹ã£ã¦ã„ã‚‹æ¼”ç®—å­ã‚’å…¨éƒ¨popã—ã¦å‡ºåŠ›ã—ã¾ã™ã€‚

![final step](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/8ae1c23e-7876-4db0-af15-227ab2ce8a1e/infix2postfix-6.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20210206%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20210206T052833Z&X-Amz-Expires=86400&X-Amz-Signature=9201209ceadfbe1d5e0200e07adbc690b3ea61df42cf85ca2eec93d76e1d3e21&X-Amz-SignedHeaders=host)

## å…¨ä½“ã‚³ãƒ¼ãƒ‰
- https://github.com/eubug17/ds-algo/blob/master/algorithm/stack/infix2postfix/infix2postfix.rb